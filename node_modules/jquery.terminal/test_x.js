#!/usr/bin/env node

var terminal = require("./js/jquery.terminal-src");
var jsdom = require('jsdom');
var jquery = require('jquery');

const { JSDOM } = jsdom;
const { window } = new JSDOM(`<!DOCTYPE html><html>`);
global.window = window;
global.document = window.document;
global.navigator = {userAgent: 'NodeJS'};
global.location = global.window.location = {hash: ''};

const $ = jquery(window);
terminal(window, $);

delete global.window;
delete global.document;

var Benchmark = require('benchmark');

var str = 'A'.repeat(10000);

var suite = new Benchmark.Suite();

suite.add('partition', function() {
    $.terminal.partition(str);
}).add('split_equal', function() {
    $.terminal.split_equal(str, 100);
}).on('cycle', function(event) {
  console.log(String(event.target));
})
.on('complete', function() {
  console.log('Fastest is ' + this.filter('fastest').map('name'));
}).run({ 'async': false });

//console.log($.terminal.is_partitioned($.terminal.partition('this is some text').join('')));
//console.log($.terminal.is_partitioned('this is some text'));
